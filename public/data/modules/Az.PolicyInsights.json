{"module":"Az.PolicyInsights","version":"0.0.0","cmdlets":{"Get-AzPolicyAttestation":{"syntax":"Get-AzPolicyAttestation [-Top <Int32>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]\n [<CommonParameters>]","examples":["Set-AzContext -Subscription \"d1acb22b-c876-44f7-b08e-3fcf9f6767f4\"\nGet-AzPolicyAttestation","This command gets all the attestations created at or underneath a subscription with id d1acb22b-c876-44f7-b08e-3fcf9f6767f4."]},"Get-AzPolicyEvent":{"syntax":"Get-AzPolicyEvent [-SubscriptionId <String>] [-Top <Int32>] [-OrderBy <String>] [-Select <String>]\n [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-Apply <String>]\n [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]","examples":["Get-AzPolicyEvent","Get-AzPolicyEvent -SubscriptionId \"fff10b27-fff3-fff5-fff8-fffbe01e86a5\"","Get-AzPolicyEvent -ManagementGroupName \"myManagementGroup\""]},"Get-AzPolicyMetadata":{"syntax":"Get-AzPolicyMetadata [-Name <String>] [-Top <Int32>] [-DefaultProfile <IAzureContextContainer>]\n [<CommonParameters>]","examples":["Get-AzPolicyMetadata","Get-AzPolicyMetadata -Top 10","Get-AzPolicyMetadata -Name ACF1348"]},"Get-AzPolicyRemediation":{"syntax":"Get-AzPolicyRemediation [-Top <Int32>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]\n [<CommonParameters>]","examples":["Set-AzContext -Subscription \"My Subscription\"\nGet-AzPolicyRemediation","Get-AzPolicyRemediation -ResourceGroupName \"myResourceGroup\" -Name \"remediation1\" -IncludeDetail","Get-AzPolicyRemediation -ManagementGroupName \"mg1\" -Top 10 -Filter \"PolicyAssignmentId eq '/providers/Microsoft.Management/managementGroups/mg1/providers/Microsoft.Authorization/policyAssignments/pa1'\""]},"Get-AzPolicyState":{"syntax":"Get-AzPolicyState [-All] [-SubscriptionId <String>] [-Top <Int32>] [-OrderBy <String>] [-Select <String>]\n [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-Apply <String>]\n [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]","examples":["Get-AzPolicyState","Get-AzPolicyState -SubscriptionId \"fff10b27-fff3-fff5-fff8-fffbe01e86a5\"","Get-AzPolicyState -All"]},"Get-AzPolicyStateSummary":{"syntax":"Get-AzPolicyStateSummary [-SubscriptionId <String>] [-Top <Int32>] [-From <DateTime>] [-To <DateTime>]\n [-Filter <String>] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]","examples":["Get-AzPolicyStateSummary","Get-AzPolicyStateSummary -SubscriptionId \"fff10b27-fff3-fff5-fff8-fffbe01e86a5\"","Get-AzPolicyStateSummary -ManagementGroupName \"myManagementGroup\""]},"New-AzPolicyAttestation":{"syntax":"New-AzPolicyAttestation -Name <String> [-Scope <String>] [-ResourceGroupName <String>]\n -PolicyAssignmentId <String> [-ComplianceState <String>] [-PolicyDefinitionReferenceId <String>]\n [-ExpiresOn <DateTime>] [-Owner <String>] [-Comment <String>] [-Evidence <PSAttestationEvidence[]>]\n [-AssessmentDate <DateTime>] [-Metadata <String>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf]\n [-Confirm] [<CommonParameters>]","examples":["Set-AzContext -Subscription \"d1acb22b-c876-44f7-b08e-3fcf9f6767f4\"\n$policyAssignmentId = \"/subscriptions/d1acb22b-c876-44f7-b08e-3fcf9f6767f4/providers/microsoft.authorization/policyassignments/psattestationsubassignment\"\n$attestationName = \"attestation-subscription\"\nNew-AzPolicyAttestation -PolicyAssignmentId $policyAssignmentId -Name $attestationName -ComplianceState \"Compliant\"","This command creates a new policy attestation at subscription 'd1acb22b-c876-44f7-b08e-3fcf9f6767f4' for the given policy assignment.\n\n>**Note:**\n>This command creates an attestation for the subscription and not the resources underneath it. For ease of management, manual policies should be designed to target the scope which defines the boundary of resources whose compliance state needs to be attested. In this case, the manual policy should be targeting `Microsoft.Resources/subscriptions`. For more information, go to https://learn.microsoft.com/en-us/azure/governance/policy/concepts/attestation-structure to understand the best practices for creating attestations."]},"Remove-AzPolicyAttestation":{"syntax":"Remove-AzPolicyAttestation -Name <String> [-Scope <String>] [-ResourceGroupName <String>] [-PassThru]\n [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]","examples":["Set-AzContext -Subscription \"d1acb22b-c876-44f7-b08e-3fcf9f6767f4\"\nRemove-AzPolicyAttestation -Name \"attestation-subscription\" -PassThru","This command deletes the attestation named 'attestation-subscription' in subscription \"d1acb22b-c876-44f7-b08e-3fcf9f6767f4\". The `-PassThru` switch forces the cmdlet to return the status of the operation.","This command deletes the attestation named 'attestation-RG' at resource group 'ps-attestation-test-rg' using input object given by the **Get-AzPolicyAttestation** cmdlet."]},"Remove-AzPolicyRemediation":{"syntax":"Remove-AzPolicyRemediation -Name <String> [-Scope <String>] [-ManagementGroupName <String>]\n [-ResourceGroupName <String>] [-AllowStop] [-AsJob] [-PassThru] [-DefaultProfile <IAzureContextContainer>]\n [-WhatIf] [-Confirm] [<CommonParameters>]","examples":["Remove-AzPolicyRemediation -ResourceGroupName \"myRG\" -Name \"remediation1\"","$remediation = Get-AzPolicyRemediation -ManagementGroupName \"mg1\" -Name \"remediation1\"\n$remediation | Remove-AzPolicyRemediation -Confirm","Remove-AzPolicyRemediation -ResourceGroupName \"myRG\" -Name \"remediation1\" -AllowStop"]},"Set-AzPolicyAttestation":{"syntax":"Set-AzPolicyAttestation -Name <String> [-Scope <String>] [-ResourceGroupName <String>]\n [-PolicyAssignmentId <String>] [-ComplianceState <String>] [-PolicyDefinitionReferenceId <String>]\n [-ExpiresOn <DateTime>] [-Owner <String>] [-Comment <String>] [-Evidence <PSAttestationEvidence[]>]\n [-AssessmentDate <DateTime>] [-Metadata <String>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf]\n [-Confirm] [<CommonParameters>]","examples":["Set-AzContext -Subscription \"d1acb22b-c876-44f7-b08e-3fcf9f6767f4\"\n$comment = \"Setting the state to non compliant\"\n$attestationName = \"attestation-subscription\"\n$policyAssignmentId = \"/subscriptions/d1acb22b-c876-44f7-b08e-3fcf9f6767f4/providers/Microsoft.Authorization/policyAssignments/PSAttestationSubAssignment\"\nSet-AzPolicyAttestation -PolicyAssignmentId $policyAssignmentId -Name $attestationName -ComplianceState \"NonCompliant\" -Comment $comment","The command here sets the compliance state and adds a comment to an existing attestation with name 'attestation-subscription' in the subscription with id 'd1acb22b-c876-44f7-b08e-3fcf9f6767f4'"]},"Start-AzPolicyComplianceScan":{"syntax":"Start-AzPolicyComplianceScan [-ResourceGroupName <String>] [-AsJob] [-PassThru]\n [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]","examples":["Start-AzPolicyComplianceScan","Start-AzPolicyComplianceScan -ResourceGroupName \"myRG\"","$job = Start-AzPolicyComplianceScan -AsJob\n$job | Wait-Job"]},"Start-AzPolicyRemediation":{"syntax":"Start-AzPolicyRemediation -Name <String> [-Scope <String>] [-ManagementGroupName <String>]\n [-ResourceGroupName <String>] -PolicyAssignmentId <String> [-PolicyDefinitionReferenceId <String>]\n [-LocationFilter <String[]>] [-ResourceDiscoveryMode <String>] [-ResourceCount <Int32>]\n [-ParallelDeploymentCount <Int32>] [-FailureThreshold <Double>] [-AsJob]\n [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]","examples":["$policyAssignmentId = \"/subscriptions/f0710c27-9663-4c05-19f8-1b4be01e86a5/providers/Microsoft.Authorization/policyAssignments/2deae24764b447c29af7c309\"\nSet-AzContext -Subscription \"My Subscription\"\nStart-AzPolicyRemediation -PolicyAssignmentId $policyAssignmentId -Name \"remediation1\"","$policyAssignmentId = \"/providers/Microsoft.Management/managementGroups/mg1/providers/Microsoft.Authorization/policyAssignments/pa1\"\nStart-AzPolicyRemediation -ManagementGroupName \"mg1\" -PolicyAssignmentId $policyAssignmentId -Name \"remediation1\" -LocationFilter \"westus\",\"eastus\"","$policyAssignmentId = \"/subscriptions/f0710c27-9663-4c05-19f8-1b4be01e86a5/resourceGroups/myRG/providers/Microsoft.Authorization/policyAssignments/2deae24764b447c29af7c309\"\nStart-AzPolicyRemediation -ResourceGroupName \"myRG\" -PolicyAssignmentId $policyAssignmentId -PolicyDefinitionReferenceId \"0349234412441\" -Name \"remediation1\""]},"Stop-AzPolicyRemediation":{"syntax":"Stop-AzPolicyRemediation -Name <String> [-Scope <String>] [-ManagementGroupName <String>]\n [-ResourceGroupName <String>] [-AsJob] [-PassThru] [-DefaultProfile <IAzureContextContainer>] [-WhatIf]\n [-Confirm] [<CommonParameters>]","examples":["Stop-AzPolicyRemediation -ResourceGroupName \"myRG\" -Name \"remediation1\"","$remediation = Get-AzPolicyRemediation -ManagementGroupName \"mg1\" -Name \"remediation1\"\n$remediation | Stop-AzPolicyRemediation"]}}}